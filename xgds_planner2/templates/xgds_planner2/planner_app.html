{% extends "base.html" %}
{% load compressed %}

{% block content %}
<style scoped="scoped">
  {% compressed_css 'planner_app' %}
</style>
<div id="application" class="container-fluid">

    <div id="toolbar" class="row btn-toolbar">
    </div>

    <div class="row-fluid">
        <div id="map" class="span6"></div>
        <div id="tabs" class="span6"></div>
    </div>
    
</div>
{% endblock content %}


{% block scripts %}
    {% if not settings.XGDS_PLANNER_OFFLINE %}<script type="text/javascript" src="https://www.google.com/jsapi"></script>{% endif %}
    {% compressed_js 'planner_app' %}
    {% compressed_js 'simulator' %}
    {% for template_name, template in templates.items %}
<script type="text/handlebars" id="template-{{template_name}}">
{{template|safe}}
</script>
    {% endfor %}
    <script id="plan_schema_json" type="application/json">{{ plan_schema_json|safe }}</script>
    <script id="plan_library_json" type="application/json">{{ plan_library_json|safe }}</script>
    <script id="plan_index_json" type="application/json">{{ plan_index_json|safe }}</script>
    {% if plan_json %}<script id="plan_json" type="application/json">{{ plan_json|safe }}</script>{% endif %}
{% endblock scripts %}

{% block jsInit %}
$(function(){
    var options = {
        offline: {{ settings.XGDS_PLANNER_OFFLINE|yesno:"true,false" }},
        planLineWidthPixels: {{ settings.XGDS_PLANNER_LINE_WIDTH_PIXELS|default:"2" }},
        layerFeedUrl: "{{ settings.XGDS_PLANNER_LAYER_FEED_URL }}", 
        simulator: {{ settings.XGDS_PLANNER_SIMULATOR }}
    };
    app.start(options);
})
{% endblock jsInit %}
