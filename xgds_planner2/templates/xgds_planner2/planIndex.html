{% extends "base.html" %}

{% load url from future %}

{% block cssExtras %}
{{ block.super }}
<style type="text/css" title="currentStyle">
	@import "{{ STATIC_URL }}external/css/jquery/demo_page.css";
	@import "{{ STATIC_URL }}external/css/jquery/demo_table.css";
	@import "{{ STATIC_URL }}external/css/jquery/jquery-ui.css";
</style>
{% endblock cssExtras %}

{% block siteSection %}Planner Index{% endblock siteSection %}

{% block sitemenu-content-secondary %}
{% include "xgds_planner2/planner2_subnav.html" %}
{% endblock %}

{% block content %}
{{ block.super }}

<!-- This functionality is now in the subnav 
<a href="{% url 'planner2_planCreate' %}" class="mybutton">Create Plan</a>
-->

<table id="planTable">
<thead class="table_header">
  <tr>
    <th>Name</th>
    <th>Export</th>
    <th class="right">Dist</th>
    <th class="right">#Stn</th>
    <th class="right">#Cmd</th>
    <th>#Cmd by type</th>
  </tr>
</thead>
<tbody>
{% for plan in plans %}
  <tr id={{ plan.id }}>
    <td class="name"><a href="{% url 'planner2_edit' plan.id %}">{{ plan.name }}</a></td>
    <td class="exportFormat">
      {% for exporter in plan.getExporters %}
        <a href="{{ exporter.url }}">
          {{ exporter.label }} 
        </a>&nbsp;&nbsp;
      {% endfor %}
    </td>
    <td class="stats right">{{ plan.lengthMeters|floatformat }}</td>
    <td class="stats right">{{ plan.numStations }}</td>
    <td class="stats right">{{ plan.numCommands }}</td>
    <td class="stats">{{ plan.getSummaryOfCommandsByType|safe }}</td>
  </tr>
{% endfor %}
</tbody>
</table>

{% endblock content %}

{% block scripts %}
  {{ block.super }}
<!--  <script language="javascript" type="text/javascript" src="{{ STATIC_URL }}external/js/jquery/jquery.dataTables.min.js"></script>-->
<script language="javascript" type="text/javascript" src="{{ STATIC_URL }}external/js/jquery/jquery-ui.js"></script>
<script language="javascript" type="text/javascript" src="{{ STATIC_URL }}external/js/jquery/jquery.dataTables.js"></script>
<script type="text/javascript">
 $(document).ready( function () {
	 var flightTable = $('#planTable').dataTable( {
		sScrollY: '28em',
		bAutoWidth: true,
        bScrollInfinite: true,
		bPaginate: false,
		bSort: true,
		bJQueryUI: true
	} );
	$(window).resize(function(){ planTable.fnAdjustColumnSizing(); });

} );
 </script>
{% endblock scripts %}
