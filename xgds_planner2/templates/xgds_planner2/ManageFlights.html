{% extends "base.html" %}
{% load url from future %}
{% load nav %}

{% block siteSection %} Manage Flight {% endblock %}

{% block nav %}
    {% nav "planner2.manageFlight" %}
    {{ block.super }}
{% endblock %}

{% block sitemenu-content-secondary %}
    {% include "xgds_planner2/planner2_subnav.html" %}
{% endblock %}

{% block contents %}
	<a class="mybutton" href="{% url 'planner2_addGroupFlight' %}">Create Flights</a>
    <h3> Active Flights </h3>
    {% if active_flights %}
        {% for active in active_flights %}
            {{active.flight.name }}<br/> 
            {% for planExecution in active.flight.plans.all %}
            &nbsp;&nbsp;{{ planExecution.plan.name }} Planned: {{planExecution.planned_start_time}} {% if planExecution.start_time %} {{planExecution.start_time}} {% else %} <a class="mybutton" />Start</a> {% endif %}
            {% if planExecution.end_time %} {{planExecution.end_time}} {% else %} <a class="mybutton" />Stop</a> {% endif %}<br/>
            {% endfor %}
        {% endfor %}
    {% endif %}

    <form enctype = "multipart/form-data"
        action="{% url 'planner2_startFlight' %}" method="post">
        Start Flight: &nbsp; <select name="flight"> {% for flight in flight_names %} 
        <option value="{{ flight }}">{{ flight }} </option>
        {% endfor %}
        </select>

        <input class="mybutton" type="submit" value="Start Flight" />
    </form>

    <p>
    <form enctype="multipart/form-data"
        action="{% url 'planner2_stopFlight' %}" method="post">
        Stop Flight: &nbsp; <select name="flight"> {% for active in active_flights %}
        <option value="{{ active.flight.name }}">{{ active.flight.name }} </option>
        {% endfor %}
        </select>
        <input class="mybutton" type="submit" value="Stop Flight" />
    </form>
    </p>
{% endblock contents %}